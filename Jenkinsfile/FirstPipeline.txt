pipeline{
	agent any
	
	stages{
		stage('Check out code from git'){
			steps{
				git branch: 'master', credentialsId: 'GitKey', url: 'https://github.com/huntercen1992/ProxyServer.git'
			}
		}
		
		stage('Maven package'){
			steps{
				sh "cp pom.${type}.xml pom.xml"
				sh "cat pom.xml"
				sh "mvn clean package"
			}
		}
		
		stage('Run jar'){
			steps{
				sh "JENKINS_NODE_COOKIE=dontKillMe nohup java -jar ./target/*.jar &"
				sh "rm -rf *"
			}
		}
	}
}